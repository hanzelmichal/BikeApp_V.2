
@{ ViewData["Title"] = "BikeApp"; }

<body>
    <div class="row" style="display:none;">
        <div class="col-md-4">
            <form asp-action="Result" method="get" enctype="multipart/form-data" id="LocationForm">
                <div class="form-group">
                    <input type="text" name="Latitude" id="Lat" class="form-control" value="" />
                </div>
                <div class="form-group">
                    <input type="text" name="Longitude" id="Lon" class="form-control" value="" />
                </div>
            </form>
        </div>
    </div>
</body>
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<div class="text-center">
    <h1 class="custom-linear">SEARCH CITY AND CHECK WEATHER FOR YOUR BIKE TRIP</h1>
    <br />
    <input type="text" class="form-control" id="usr" text-center>
    <br />
    <button id="location" onclick="getLocation()" class="btn btn-info">LOCATE ME</button>
    <input type="button" class="btn btn-info" id="WeatherForecast" value="GET FORECAST" />


</div>


@section Scripts{
    <script type="text/javascript">
        $("#WeatherForecast").click(function () {
            var txtVal = $("#usr").val();
            window.location = "@Url.Action("WeatherF","Home")" +
                              "/" + txtVal;
        });
    </script>

    <script>
        var loc = document.getElementById("Lat");
        var loc2 = document.getElementById("Lon");
        var locform = document.getElementById("LocationForm");

        function getLocation() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(showPosition);
            } else {
                loc.innerHTML = "Geolocation is not supported by this browser.";
            }
        }

        function showPosition(position) {
            loc.value = position.coords.latitude;
            loc2.value = position.coords.longitude;
            locform.submit();
        }

    </script>

}
